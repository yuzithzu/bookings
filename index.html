<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>üì¶ Booking Form - Send to Viber</title>
<style>
  body { font-family: 'Poppins', sans-serif; background: #f6f8fa; margin: 0; padding: 0; display: flex; flex-direction: column; align-items: center; }
  h1 { color: #0d6efd; margin-top: 30px; }
  form { background: white; padding: 25px; border-radius: 12px; width: 90%; max-width: 600px; box-shadow: 0 3px 12px rgba(0,0,0,0.1); margin-top: 20px; }
  label { display: block; margin-top: 15px; font-weight: 600; }
  input, textarea, select {
    width: 100%; padding: 10px; margin-top: 6px; border: 1px solid #ccc; border-radius: 8px; font-size: 14px;
  }
  .btn {
    width: 100%; background: #0d6efd; color: white; border: none;
    padding: 12px; border-radius: 8px; font-size: 16px; margin-top: 20px; cursor: pointer;
  }
  .btn:hover { background: #094fc0; }
  #viberFallback {
    display: none; text-align: center; margin-top: 20px;
  }
  #viberFallback a {
    display: inline-block;
    background: #7360f2;
    color: white; padding: 12px 20px;
    border-radius: 8px; text-decoration: none; font-weight: 600;
  }
</style>
</head>
<body>

<h1>üì¶ Booking Form</h1>

<form id="bookingForm">
  <label>Name of Account (MD/Patient):</label>
  <input type="text" id="name" required>

  <label>Contact Number:</label>
  <input type="tel" id="contact" required>

  <label>Delivery Option:</label>
  <select id="delivery">
    <option>Pick-Up (by client at office)</option>
    <option>Delivery (by branch rider to client)</option>
    <option selected>Pick-Up by Lalamove / Grab / Courier</option>
  </select>

  <label>Pick-Up / Delivery Address:</label>
  <textarea id="address" rows="2"></textarea>

  <label>Preferred Date & Time:</label>
  <input type="date" id="date"> <input type="time" id="time">

  <label>Order Details:</label>
  <textarea id="order" rows="3" placeholder="BRAND / GENERIC / QTY / DISCOUNT"></textarea>

  <label>Total Amount (‚Ç±):</label>
  <input type="number" id="total">

  <label>Distributor & Branch:</label>
  <input type="text" id="distributor">

  <label>Remarks / Special Instructions:</label>
  <textarea id="remarks" rows="3"></textarea>

  <button class="btn" type="submit">Send to Viber</button>
</form>

<div id="viberFallback">
  <p>‚ö†Ô∏è Safari users: Tap below to open Viber manually.</p>
  <a id="manualViberLink" href="#" target="_blank">üì± Open in Viber</a>
</div>

<script>
  const form = document.getElementById('bookingForm');
  const fallback = document.getElementById('viberFallback');
  const manualLink = document.getElementById('manualViberLink');

  form.addEventListener('submit', (e) => {
    e.preventDefault();

    const phone = "+639568663952"; // <-- your public Viber number

    const name = document.getElementById('name').value.trim();
    const contact = document.getElementById('contact').value.trim();
    const delivery = document.getElementById('delivery').value;
    const address = document.getElementById('address').value.trim();
    const date = document.getElementById('date').value;
    const time = document.getElementById('time').value;
    const order = document.getElementById('order').value.trim();
    const total = document.getElementById('total').value.trim();
    const distributor = document.getElementById('distributor').value.trim();
    const remarks = document.getElementById('remarks').value.trim();

    const message = 
`üì¶ *New Booking Form*
üë§ Name: ${name}
üìû Contact: ${contact}
üöö Delivery: ${delivery}
üè† Address: ${address}
üóì Date: ${date} ${time}
üì¶ Order: ${order}
üí∞ Total: ‚Ç±${total}
üè¢ Distributor: ${distributor}
üìù Remarks: ${remarks}`;

    const encoded = encodeURIComponent(message);
    const viberLink = `viber://chat?number=${phone}&text=${encoded}`;
    const viberMe = `https://msng.link/o/?${phone.replace('+', '')}=vi`;

    manualLink.href = viberMe; // fallback for Safari

    // Try auto-open Viber
    const isIOS = /iPhone|iPad|iPod/i.test(navigator.userAgent);
    if (isIOS) {
      // iPhone users ‚Üí show fallback button instead of forcing auto open
      fallback.style.display = 'block';
    } else {
      // Android & Desktop ‚Üí open automatically
      window.location.href = viberLink;
      setTimeout(() => {
        fallback.style.display = 'block';
      }, 1500);
    }
  });
</script>

</body>
</html>
